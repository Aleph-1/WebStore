<html>
    <head>
        <link href="https://fonts.googleapis.com/css?family=Raleway&display=swap" rel="stylesheet">
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-GLhlTQ8iRABdZLl6O3oVMWSktQOp6b7In1Zl3/Jr59b6EGGoI1aFkw7cmDA6j6gD" crossorigin="anonymous">
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js" integrity="sha384-w76AqPfDkMBDXo30jS1Sgez6pr3x5MlQ1ZAGC+nuZB+EYdgRZgiwxhTBTkF7CXvN" crossorigin="anonymous"></script>
        
        <link href="../Cart/CartD.css" rel="stylesheet">
        <script src="../Cart/CartF.js"></script>
        <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    </head>
    <body>
        <form method="post" action='/buyPage'>
            <div class="container-fluid banner">
                <div class="row">
                    <div class="col-md-12">
                        <div id="template1" class="header">
                            <%- include ('../HomePage/HomePage.ejs') %>
                        </div>
                    </div>
                    <div class="col-md-8 offset-md-2 info text-center cart">
                        <h1>Shopping Cart</h1>
                        <table class="table">
                            <thead>
                              <tr>
                                <th scope="col" style="width: 5px;">Remove</th>
                                <th scope="col" style="width: 150px;">Picture</th>
                                <th scope="col" style="width: 150px;">Title</th>
                                <th scope="col" style="width: 150px;">Description</th>
                                <th scope="col" style="width: 150px;">Amount Available</th>
                                <th scope="col" style="width: 150px;">Quantity</th>
                                <th scope="col" style="width: 150px;">Delete</th>
                                <th scope="col" style="width: 150px;">Price</th>
                              </tr>
                            </thead>
                            <tbody>
                                <% total=0 %>
                                <% for (pro of finalProducts) { %>
                                    <% total+= pro.price*map.get(pro._id)  %>
                                    <tr id="<%= pro._id %>">
                                        <td>
                                            <label class="container">
                                                <input type="checkbox" value="1" checked="checked" id="<%= pro._id +3%>" data-id="<%= pro._id %> <%= pro._id +2%> <%= pro._id +3%> <%= pro._id +4 %> <%= pro._id +5 %>" onclick="remove(event)">
                                                <span class="checkmark"></span>
                                            </label>
                                        </td>
                                        <td><img src="<%= pro.Pictures[0] %>" style="width: 200px; height: 200px;"></td>
                                        <td><%= pro.Title %></td>
                                        <td><%= pro.shortDescription %></td>
                                        <td><%= pro.AmountAvailable %></td>
                                        <td>
                                            <button type="button" class="btn btn-light" id="<%= pro._id +4 %>" data-id="<%= pro._id +1 %> <%= pro._id +2%> <%= pro._id %>" onclick="decrease(event)">-</button>
                                            
                                            <input type="text" id="<%= pro._id +1 %>" value="<%= map.get(pro._id) %>" disabled="disabled" class="change"/>

                                            <button type="button" class="btn btn-light" id="<%= pro._id +5 %>" data-id="<%= pro._id +1 %> <%= pro._id +2%> <%= pro._id %>" onclick="increase(event)">+</button>
                                        </td>
                                        <td><a type="button" class="btn btn-danger" data-id="<%= pro._id %> <%= pro._id +2%> id <%= pro._id +3%>"  onclick="removeFromCart(event)" href="/cart/removeFromCart/<%= pro._id %>">Delete</a></td>
                                        <td>
                                            $ <input type="text" value="<%= pro.price*map.get(pro._id) %>" id="<%= pro._id +2%>" disabled="disabled" class="change"/> 
                                        </td>
                                    </tr>
                                <% } %>
                                <tr>
                                    <th>Total:</th>
                                    <td>
                                        $ <input type="text" value="<%= total %>" id="total" disabled="disabled" class="change"/>
                                    </td>
                                    <td><a type="button" class="btn btn-danger" data-id="finalProducts" onclick="pictures(event)" href="/buyPage">Buy Now</a></td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div id="footer1" class="footer">
                        <Object class="no-scroll" data="../TemplatePage/TemplateFoot.html" width="100%" height="280%"></Object>
                    </div>
                </div>
            </div>
        </form>
    </body>
</html>
